# 本地验证（国内适配）快速指南

## 环境准备
- Python 3.10+，建议使用已有虚拟环境`.venv`。
- 安装依赖：
  - `pip install -r requirements.txt`

## 配置密钥与模型
- 设置环境变量（PowerShell示例，优先通义）：
  - `setx LLM_PROVIDER qwen`
  - `setx DASHSCOPE_API_KEY <你的通义密钥>`
- 备用：如需兼容端点（非官方SDK）
  - `setx LLM_BASE_URL <兼容端点地址>`
  - `setx LLM_API_KEY <你的密钥>`
- 如需修改默认模型与权重：编辑 `config/models/registry.yaml`（`api_key_env: DASHSCOPE_API_KEY`）与 `config/routing.yaml`。

## 运行PoC
- `python scripts/poc_local_validate.py`
- 预期：输出提供者与模型；若兼容端点配置正确，返回LLM生成；否则显示离线演示（含工具计算与示例知识引用）。

## 下一步（可选）
- 替换为国内官方SDK调用（ERNIE/Spark/Hunyuan等），并在`registry.yaml`中记录SDK配置。
- 增加工具集与JSON Schema，并在PoC中增加参数校验与错误处理。
- 引入评估与断言：为输出添加引用一致性与格式断言，记录评估指标。
- 与架构文档对齐：按`LLM 大脑层与配置`章节完善路由、守护与审计策略。
